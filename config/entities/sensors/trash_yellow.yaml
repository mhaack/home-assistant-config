---
# Template sensor for the yellow trash schedule
#
platform: template
sensors:
  trash_yellow:
    friendly_name: "Gelbe Tonne"
    icon_template: mdi:trash-can-outline
    device_class: timestamp
    value_template: >-
      {% if state_attr('sensor.trash_raw', 'g') != None %}
        {% if as_timestamp(now()) - state_attr('sensor.trash_raw', 'g')[1] < 0 %}
          {{ state_attr('sensor.trash_raw', 'g')[1] | timestamp_local | replace(' ', 'T') }}Z
        {% else %}
          {{ state_attr('sensor.trash_raw', 'g')[2] | timestamp_local | replace(' ', 'T') }}Z
        {% endif %}
      {% endif %}
